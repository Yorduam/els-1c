
Процедура ОбработкаПроведения(Отказ, Режим)
	// регистр АктуальнаяГруппаСтудента
	Движения.АктуальностьКонтингента.Записывать = Истина;
	Для Каждого ТекСтрокаАбитуриенты Из Абитуриенты Цикл
		Движение = Движения.АктуальностьКонтингента.Добавить();
		Движение.Период = Дата;
		Движение.Обучающийся = ТекСтрокаАбитуриенты.ФИО;
		Движение.Специальность = ТекСтрокаАбитуриенты.Группа.Специальность;
		Движение.Группа = ТекСтрокаАбитуриенты.Группа;
		Движение.Обучается = Истина;
		Движение.ДвижениеКонтингента = Перечисления.ДвижениеКонтингента.Зачисление;
	КонецЦикла;
	
	// регистр АктивныйКонтингент
	Движения.АктивныйКонтингент.Записывать = Истина;
	Для Каждого ТекСтрокаАбитуриенты Из Абитуриенты Цикл
		Движение = Движения.АктивныйКонтингент.Добавить();
		Движение.ВидДвижения = ВидДвиженияНакопления.Приход;
		Движение.Период = Дата;
		Движение.Обучающийся = ТекСтрокаАбитуриенты.ФИО;
		Движение.Обучаются = 1;
	КонецЦикла;
	
	// подсчет группы
	МассивУчета = Новый Соответствие;
	
	Для Каждого ТекСтрокаАбитуриенты Из Абитуриенты Цикл 
		Если МассивУчета.Получить(ТекСтрокаАбитуриенты.Группа) = 1 Тогда
			МассивУчета[ТекСтрокаАбитуриенты.Группа] = МассивУчета[ТекСтрокаАбитуриенты.Группа] + 1;
		Иначе
			МассивУчета.Вставить(ТекСтрокаАбитуриенты.Группа, 1);
		КонецЕсли;
	КонецЦикла;
	
	// регистр ЧисленностьГруппы Приход
	Движения.ЧисленностьГруппы.Записывать = Истина;
	Для Каждого Стр Из МассивУчета Цикл
		Движение = Движения.ЧисленностьГруппы.Добавить();
		Движение.ВидДвижения = ВидДвиженияНакопления.Приход;
		Движение.Период = Дата;
		Движение.Группа = Стр.Ключ;
		Движение.Количество = Стр.Значение;
	КонецЦикла
КонецПроцедуры
